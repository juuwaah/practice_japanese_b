{% extends "base.html" %}

{% block title %}{{ level }} YouTube リスニングクイズ一覧{% endblock %}

{% block head %}
<style>
/* YouTube Listening List Page Styles */
.youtube-listening-page {
    font-size: 0.75em; /* 75% of base font size */
}

.youtube-listening-page .container {
    max-width: 100% !important;
    width: 100% !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
}

/* Hide sidebar for full-width display */
.youtube-listening-page .sidebar-layout > div:last-child {
    display: none !important;
}

.youtube-listening-page .sidebar-layout > div:first-child {
    flex: 1 !important;
    max-width: 100% !important;
    width: 100% !important;
}
</style>
{% endblock %}

{% block content %}
<div class="youtube-listening-page">
<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>{{ level }} YouTube リスニングクイズ</h1>
        <a href="{{ url_for('youtube_listening.listening_levels') }}" class="btn btn-secondary">レベル選択に戻る</a>
    </div>
    
    <!-- ソートボタン -->
    <div class="mb-3">
        <div class="btn-group" role="group">
            <a href="{{ url_for('youtube_listening.listening_quiz_list', level=level, sort='title', order='asc') }}" 
               class="btn btn-outline-primary {% if current_sort == 'title' and current_order == 'asc' %}active{% endif %}">
                タイトル ↑
            </a>
            <a href="{{ url_for('youtube_listening.listening_quiz_list', level=level, sort='length', order='asc') }}" 
               class="btn btn-outline-primary {% if current_sort == 'length' and current_order == 'asc' %}active{% endif %}">
                時間 ↑
            </a>
            <a href="{{ url_for('youtube_listening.listening_quiz_list', level=level, sort='length', order='desc') }}" 
               class="btn btn-outline-primary {% if current_sort == 'length' and current_order == 'desc' %}active{% endif %}">
                時間 ↓
            </a>
        </div>
    </div>
    
    <div class="row">
        {% for quiz in quizzes %}
        <div class="col-md-6 col-lg-4 mb-3">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-title">{{ quiz.title }}</h6>
                    <p class="card-text small">
                        時間: {{ (quiz.duration // 60) }}分{{ (quiz.duration % 60) }}秒
                    </p>
                    <a href="{{ url_for('youtube_listening.listening_quiz', quiz_id=quiz.id) }}" 
                       class="btn btn-primary btn-sm">開始</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    
    {% if not quizzes %}
    <div class="alert alert-info">
        <p>{{ level }}レベルのクイズが見つかりません。</p>
    </div>
    {% endif %}
    
    <!-- YouTube著作権免責事項 -->
    <div style="margin-top: 24px; padding: 12px; border: 1px solid #ccc; background: #f9f9f9; font-size: 11px; line-height: 1.4;">
        <h4 style="font-size: 12px; margin-bottom: 8px; color: #333;">免責事項</h4>
        
        <p style="margin-bottom: 8px;">このページでは、YouTube API を使用して埋め込まれた動画を表示しています。埋め込みプレーヤーを通じて視聴される動画の再生回数や視聴データは、元の YouTube 動画に直接加算されます。</p>
        
        <p style="margin-bottom: 8px;">本サイトでは、YouTube 公式の埋め込み機能を利用しており、動画の所有権や著作権は<strong>各動画の制作者または権利者</strong>に帰属します。当サイトは動画の内容を変更したり、独自配信しているものではありません。</p>
        
        <p style="margin-bottom: 8px;">また、当サイトを使用することにより、ユーザーは YouTube の<a href="https://www.youtube.com/t/terms" target="_blank" style="color: #1976d2;">利用規約</a>および<a href="https://policies.google.com/privacy" target="_blank" style="color: #1976d2;">プライバシーポリシー</a>に同意したものとみなされます。当サイトにおける YouTube API の利用については、Google の Developer Policies を遵守しています。</p>
    </div>
</div>
</div>
{% endblock %}